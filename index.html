<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>mobile live</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/tab.css">
	<link rel="stylesheet" type="text/css" href="css/btn_siwper.css">

	<script type="text/javascript">
		(function () {
            var timer;
            changeFixedW();
            function changeFixedW() {
                var width = window.screen.width;
                var fixedW = 660;
                var scale = width / fixedW;
                var meta = document.createElement('meta');
                meta.setAttribute('name','viewport');
                meta.setAttribute('content','width='+fixedW+',initial-scale='+scale+',maximum-scale='+scale+',user-scalable=no');
                document.head.appendChild(meta);
            }
            window.addEventListener('resize', function () {
                clearTimeout(timer);
                timer = setTimeout(changeFixedW, 300);
            }, false);
            window.addEventListener('pageshow', function (e) {
                if (e.persisted) {
                    clearTimeout(timer);
                    timer = setTimeout(changeFixedW, 300);
                }
            }, false);
        })();
	</script>	
</head>
<body class="live-body">
	<!-- videobox -->
	<div class="video-box" >
			<video src="" class="video-view" poster="images/video.jpg" >
                  <source src="" type="video/mp4">
                  <source src="" type="video/ogg">
            </video>
	</div>
	<!-- banner -->
	<div id="banner-box" class="banner-bar">
		<div class="banner-swiper">
			<div class="live-info">
				<span class="view-cmt-wrap">
					<i class="iconfont-num">&#xe660;</i>
					<span>134</span>
				</span>
				<span class="view-cmt-wrap">
					<i class="iconfont-watch ">&#xe67e;</i>
					<span>10</span>
				</span>
				<span class="dm-wrap">
					<span>弹幕</span>
					<span class="dm-box">
						<input class="mui-switch mui-switch-anim"  type="checkbox" id="switch">
					</span>
					
				</span>
			</div>
		</div>
	</div>
	<!-- tab选项卡 -->
    <div class="WX_content">
                <div class="WX_navbar">
                    <div class="navbar-item navbar-item_on">聊天互动</div>
                    <div class="navbar-item">文章列表</div>
                    <div class="navbar-item">微信</div>
                     <div class="navbar-item">应用</div>
                </div>
                <div class="page_wrap">
                    <div class="page page_on">
                        <div class="" >
                        	<ul class="comment-box" >
                        		
                    
                        		<li class="comment">
                        			暂无更多
                        		</li>
                        		
                        	</ul>
                        </div>
                    </div>
                    <div class="page">
                       <div class="tab-box-li">ceshiceshi</div>
                    </div>
                    <div class="page">
                       <div class="tab-box-li">时政时政时政时政</div>
                    </div>
                     <div class="page">
                       <div class="tab-box-li">应用应用应用应用应用应用</div>
                    </div>
                </div>
    </div>
    <div class="publish-box">
    	<div id="publish-wrap">
    		<span class="mobile-emotion-span">
    			<i class="iconfont-emotion">&#xe600;</i>
    		</span>

    		
    		<div class="input-text-wrap">
    			<input type="" name="" id="input-content" class="input-text">
    		</div>
    		<span class="publish-btn" onclick="testarr()">发送</span>
    	</div>
    	<div class="model"></div>
    </div>

    <!-- float-right -->
    <div class="btn-float-right btn-float-right-hidden" id="btn-float-right">
    	<i class="iconfont-add-img">&#xe601;</i>
    </div>
    <div id="float-right" class="float-right-hidden">
    	<div class="vote-btn-lottery vote-btn-div">
    		
    		<span class="float-right-text">我要<br/>抽奖</span>
    	</div>
    	<div class="vote-btn-vote vote-btn-div">
    		<i class="iconfont-img">&#xe678;</i>
    		<span class="float-right-text">投票</span>
    	</div>
    	<div class="vote-btn-gratuity vote-btn-div">
    		<i class="iconfont-img">&#xe678;</i>
    		<span class="float-right-text">打赏</span>
    	</div>
    	<div class="vote-btn-file vote-btn-div">
    		<i class="iconfont-img">&#xe678;</i>
    		<span class="float-right-text">文档</span>
    	</div>
    	
    </div>
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="layer_mobile/layer.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script type="text/javascript">
    	var oNav = document.querySelector('.WX_content .WX_navbar').querySelectorAll('div');
        var oPage = document.querySelector('.WX_content').querySelectorAll('.page');
        var length = oPage.length;
        var oPageWrap = document.querySelector('.WX_content .page_wrap');
        var start = {
            x:0,
            y:0
        };
        var end = {
            x: 0,
            y: 0
        };
        var index = 0;

        oPageWrap.addEventListener('touchstart',touch,false);
        oPageWrap.addEventListener('touchmove',touch,false);
        oPageWrap.addEventListener('touchend',touch,false);

        for( var i=0;i<length;i++ ){
            (function (i) {
                oNav[i].onclick =function () {
                    AddClass(i);
                }
            })(i)
        }

        function touch(event) {
            switch ( event.type ){
                case 'touchstart':
                    start.x = event.changedTouches[0].pageX;
                    start.y = event.changedTouches[0].pageY;
                    break;
                case 'touchmove':
                    end.x = event.changedTouches[0].pageX;
                    end.y = event.changedTouches[0].pageY;
                    break;
                case 'touchend':
                    if( (start.x - end.x) > ( Math.abs(end.y - start.y)*2 ) ){
                        index ++;
                        index = index > length-1 ? length-1 : index;
                        AddClass(index);
                    }
                    if( (end.x - start.x) > (Math.abs(end.y - start.y)*2) ){
                        index--;
                        index = index < 0 ? 0 : index;
                        AddClass(index);
                    }
                    break;
            }
        }
        function AddClass(k) {
            for( var i=0;i<oNav.length;i++ ){
                //oNav[i].className = 'navbar-item';
                oNav[i].setAttribute('class','navbar-item');
                oPage[i].setAttribute('class','page');
            }
            oNav[k].setAttribute('class','navbar-item navbar-item_on');
            oPage[k].setAttribute('class','page page_on');
        }


        var result = [{"head_img":"images/head1.jpg","user":"wangjiang","texts":"hjdsfhjk","textdate":"2017-12-14 2:05"},{"head_img":"images/head1.jpg","user":"wangshi","texts":"hjdsfhjk","text":"\u738b\u664b\u662f\u8001\u5927","textdate":"2017-12-17 2:05"},{"head_img":"images/head1.jpg","user":"zhangsan","texts":"hjdsfhjk","text":"\u738b\u664b\u6280\u672f\u9876\u5471\u5471","textdate":"2017-12-16 2:05"}];
       
         $.each(result,function(index,item){
         	var li ='<li class="comment">'+
        			'<img src="'+item.head_img+'" class="cmt-ava">'+
        			'<p class="cmt-info">'+
        				'<span class="cmt-user">'+item.user+'</span>'+
        				'<span class="cmt-time">'+item.textdate+'</span>'+
        			'</p>'+
        			'<div class="cmt-content">'+item.texts+'</div>'+
        		'</li>';
        		$(".comment-box").append(li);
        })
    </script>
</body>
</html>