<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>mobile live</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/tab.css">
	<link rel="stylesheet" type="text/css" href="css/btn_siwper.css">
  <link rel="stylesheet" href="layim/src/css/layui.mobile.css">
  <style type="text/css">
    body .layim-title{display: none;}
    body .layim-chat-main, body .layui-layim{top: 0}
    body .layim-panel{position: fixed;top: 495px;}
    body .layim-panel .layim-content{top: 495px;}
    body .layim-chat-main{top: 495px;background-color: #fff;}
    body .layim-chat-user img {width: 50px;height: 50px;}
    body .layim-chat-user cite{font-size: 20px}
    body .layim-chat-text{font-size: 20px}
    body .layui-layim-face li img{width: 50px;height: 50px}
    body .layim-chat-text img{width: 40px;height: 40px}
    body .layim-chat-system span{font-size: 20px}
  </style>

	<script type="text/javascript">
		(function () {
            var timer;
            changeFixedW();
            function changeFixedW() {
                var width = window.screen.width;
                var fixedW = 660;
                var scale = width / fixedW;
                var meta = document.createElement('meta');
                meta.setAttribute('name','viewport');
                meta.setAttribute('content','width='+fixedW+',initial-scale='+scale+',maximum-scale='+scale+',user-scalable=no');
                document.head.appendChild(meta);
            }
            window.addEventListener('resize', function () {
                clearTimeout(timer);
                timer = setTimeout(changeFixedW, 300);
            }, false);
            window.addEventListener('pageshow', function (e) {
                if (e.persisted) {
                    clearTimeout(timer);
                    timer = setTimeout(changeFixedW, 300);
                }
            }, false);
        })();
	</script>	
</head>
<body class="live-body">
	<!-- videobox -->
	<div class="video-box" >
			<!-- <video src="" class="video-view" poster="images/video.jpg" >
                  <source src="" type="video/mp4">
                  <source src="" type="video/ogg">
            </video> -->
      <div id="video"  style="width: 658px; height: 368px;"></div>
	</div>
	<!-- banner -->
	<div id="banner-box" class="banner-bar">
		<div class="banner-swiper">
			<div class="live-info">
				<span class="view-cmt-wrap">
					<i class="iconfont-num">&#xe660;</i>
					<span>134</span>
				</span>
				<span class="view-cmt-wrap">
					<i class="iconfont-watch ">&#xe67e;</i>
					<span>10</span>
				</span>
				<span class="dm-wrap">
					<span>弹幕</span>
					<span class="dm-box">
						<input class="mui-switch mui-switch-anim"  type="checkbox" id="switch">
					</span>
					
				</span>
			</div>
		</div>
	</div>
	<!-- tab选项卡 -->
    <div class="WX_content">
                <div class="WX_navbar">
                    <div class="navbar-item navbar-item_on">聊天互动</div>
                    <div class="navbar-item">文章列表</div>
                    <div class="navbar-item">微信</div>
                     <div class="navbar-item">应用</div>
                </div>
                <div class="page_wrap">
                    <div class="page page_on">
                      <div class="common-norank" id="layim-div"></div>
                    </div>
                    <div class="page">
                       <div class="tab-box-li">ceshiceshi</div>
                    </div>
                    <div class="page">
                       <div class="tab-box-li">时政时政时政时政</div>
                    </div>
                     <div class="page">
                       <div class="tab-box-li">应用应用应用应用应用应用</div>
                    </div>
                </div>
    </div>
    

    <!-- float-right -->
    <div class="btn-float-right btn-float-right-hidden" id="btn-float-right">
    	<i class="iconfont-add-img">&#xe601;</i>
    </div>
    <div id="float-right" class="float-right-hidden">
    	<div class="vote-btn-lottery vote-btn-div index-display">
    		
    		<span class="float-right-text">我要<br/>抽奖</span>
    	</div>
    	<div class="vote-btn-vote vote-btn-div" data-toggle="model" data-target="#voteModal">
            <div class="btn-vote">
        		<i class="iconfont-img">&#xe678;</i>
        		<span class="float-right-text">投票</span>
            </div>
            <!-- 文字投票 -->
            <div id="vote-wrap-text" class="mb-vote-wrap index-display ">
                <div class="vote-box-close">
                    <i class="btn-close-vote">&#xe69a;</i>
                </div>
                <div class="vote-radio" >
                  <p class="vote-title">文字投票(单选)</p>
                  <form name="vote-form">
                    <ul>
                      <li class="vote-item">
                        <p class="vote-name">
                          <input type="radio" name="vote-ques-1" class="radio-input">
                          <label class="vote-text" for="">内容内容</label>
                        </p>
                      </li>
                      <li class="vote-item">
                        <p class="vote-name">
                          <input type="radio" name="vote-ques-1" class="radio-input" >
                          <label class="vote-text" for="">内容</label>
                        </p>
                      </li>
                    </ul>
                  </form>
                </div>
                <div class="vote-check index-display" >
                  <p class="vote-title">文字投票(多选，最多选2项)</p>
                  <form name="vote-form">
                    <ul>
                      <li class="vote-item">
                        <p class="vote-name">
                          <input type="checkbox" name="vote-ques-1" class="radio-input" >
                          <label class="vote-text" for="">内容</label>
                        </p>
                      </li>
                      <li class="vote-item">
                        <p class="vote-name">
                          <input type="checkbox" name="vote-ques-1" class="radio-input" >
                          <label class="vote-text" for="">内容</label>
                        </p>
                      </li>
                    </ul>
                  </form>
                </div>
                <p class="vote-button">投票</p>
            </div>
            <!-- 图文投票 -->
            <div id="vote-wrap-img" class="mb-vote-wrap index-display vote-text-hidden"  >
              <div class="vote-img-title">
                    <p class="vote-img-title-text">1/1(单选)图文投票单选</p>
                    <div class="vote-img-close">
                      <i class="anticon-close">&#xe617;</i>
                    </div>
              </div>
            
            <div class="vote-select-group-warp">
              <div class="vote-select-item nth-odd">
                <div class="vote-selection-item-content">
                  <div class="vote-select-img-wrap">
                    <div class="select-img-wrap">
                      <img src="images/timg1.jpg" class="select-img" >
                    </div>
                    <p class="select-name">1</p>
                  </div>
                  <div class="vote-select-bottom-wrap">
                    <div class="vote-num-wrap">0票</div>
                    <div class="vote-btn-wrap">
                      <button class="img-vote-btn">投票</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="vote-select-item nth-even">
                <div class="vote-selection-item-content">
                    <div class="vote-select-img-wrap">
                      <div class="select-img-wrap">
                        <img src="images/timg1.jpg" class="select-img" >
                      </div>
                      <p class="select-name">1</p>
                    </div>
                    <div class="vote-select-bottom-wrap">
                      <div class="vote-num-wrap">0票</div>
                      <div class="vote-btn-wrap">
                        <button class="img-vote-btn">投票</button>
                      </div>
                    </div>
                  </div>
              </div>
            </div>
             
            </div>
    	</div>
    	<div class="vote-btn-gratuity vote-btn-div">
            <div class="icon-reward">
    		<i class="iconfont-img">&#xe678;</i>
    		<span class="float-right-text">打赏</span>
            </div>
            <!-- 现金打赏 -->
            
            <div class="reward-wrap index-display " id="reward-wrap">
              <div id="reward-pay-close">
                <i class="reward-icon closeicon-reward">&#xe69a;</i>
              </div>
              
              <div class="cash-banner">
                    <span>打赏</span>
              </div>
              <div class="cash-price-wrap">
                <p class="p-price">
                  <span class="label">金额</span>
                  <input type="text" name="money" class="money">
                  <span class="pay-btn">立即支付</span>
                </p>
              </div>
              <div class="cash-rank-box">
                <div class="cash-rank-title">
                  <span class="title-left">共<i class="num" id="userNum">0</i>人参与</span>
                  <span class="title-right">累计金额<i class="num" id="totalSum">￥0</i></span>
                </div>
              </div>
              <div id="cash-rank-content"></div>
            </div>
            
    	</div>
    	<div class="vote-btn-file vote-btn-div">
            <div class="btn-file">
        		<i class="iconfont-img">&#xe678;</i>
        		<span class="float-right-text">文档</span>
            </div>
            <div class="docs-show-box index-display">
                <span class="closeicon">
                    <i class="iconfont-close-file">&#xe617;</i>
                </span>
            </div>
    	</div>
    	
    </div>
   <!--  <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script> -->
   <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="layer_mobile/layer.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script src="layim/src/layui.js"></script>
    <!-- ckplayer -->
    <script type="text/javascript" src="ckplayer/ckplayer/ckplayer.js"></script>
    <script type="text/javascript">
      var videoObject = {
        container: '#video', //容器的ID或className
        variable: 'player',//播放函数名称
        poster:'images/video.jpg',//封面图片
        //flashplayer:true,
        video: [//视频地址列表形式
          ['http://pullhls065612c0.live.126.net/live/2c78727af402481283d882890a7a15fe/playlist.m3u8', 'video/m3u8', '中文标清', 0],
        ]
      };
      var player = new ckplayer(videoObject);
    </script>
    <div id="aa"></div>
    <script>
    layui.config({
      version: true
    }).use('mobile', function(){
      var mobile = layui.mobile
      ,layim = mobile.layim
      ,layer = mobile.layer;
      
      //演示自动回复
      var autoReplay = [
        '您好，我现在有事不在，一会再和您联系。', 
        '你没发错吧？face[微笑] ',
        '洗澡中，请勿打扰，偷窥请购票，个体四十，团体八折，订票电话：一般人我不告诉他！face[哈哈] ',
        '你好，我是主人的美女秘书，有什么事就跟我说吧，等他回来我会转告他的。face[心] face[心] face[心] ',
        'face[威武] face[威武] face[威武] face[威武] ',
        '<（@￣︶￣@）>',
        '你要和我说话？你真的要和我说话？你确定自己想说吗？你一定非说不可吗？那你说吧，这是自动回复。',
        'face[黑线]  你慢慢说，别急……',
        '(*^__^*) face[嘻嘻] ，是贤心吗？'
      ];
      
      layim.config({
        
        
       init: {
          //我的信息
          mine: {
            "username": "纸飞机" //我的昵称
            ,"id": 123 //我的ID
            ,"avatar": "http://tvax1.sinaimg.cn/crop.0.0.300.300.180/006Iv8Wjly8ff7ghbigcij308c08ct8i.jpg" //我的头像
            ,"sign": "懒得签名"
          }
          ,
        }

      });
      
      //创建一个会话
      
      layim.chat({
        id: 111111
        ,name: '许闲心'
        ,type: 'group' //friend、group等字符，如果是group，则创建的是群聊
        ,avatar: 'http://tp1.sinaimg.cn/1571889140/180/40030060651/1'
      });
      
      
      
      //查看聊天信息
      layim.on('detail', function(data){
        //console.log(data); //获取当前会话对象
        layim.panel({
          title: data.name + ' 聊天信息' //标题
          ,tpl: '<div style="padding: 10px;">自定义模版，<a href="http://www.layui.com/doc/modules/layim_mobile.html#ondetail" target="_blank">参考文档</a></div>' //模版
          ,data: { //数据
            test: '么么哒'
          }
        });
      });
      
      

      
     
      //监听发送消息
      layim.on('sendMessage', function(data){
        var To = data.to;
        //console.log(data);

        //演示自动回复
        setTimeout(function(){
          var obj = {};
          if(To.type === 'group'){
            obj = {
              username: '模拟群员'+(Math.random()*100|0)
              ,avatar: layui.cache.dir + 'images/face/'+ (Math.random()*72|0) + '.gif'
              ,id: To.id
              ,type: 'group'
              ,content: autoReplay[Math.random()*9|0]
            }
          } else {
            obj = {
              username: To.name
              ,avatar: To.avatar
              ,id: To.id
              ,type: To.type
              ,content: autoReplay[Math.random()*9|0]
            }
          }
          layim.getMessage(obj);
        }, 3000);
      });
      
      //监听查看更多记录
      layim.on('chatlog', function(data, ul){
        console.log(data);
        layim.panel({
          title: '与 '+ data.name +' 的聊天记录' //标题
          ,tpl: '<div style="padding: 10px;">这里是模版，{{d.data.test}}</div>' //模版
          ,data: { //数据
            test: 'Hello'
          }
        });
      });
      
      //模拟"更多"有新动态
      layim.showNew('More', true);
      layim.showNew('find', true);
    });
    </script>
    <!-- <script type="text/javascript">
    	var oNav = document.querySelector('.WX_content .WX_navbar').querySelectorAll('div');
        var oPage = document.querySelector('.WX_content').querySelectorAll('.page');
        var length = oPage.length;
        var oPageWrap = document.querySelector('.WX_content .page_wrap');
        var start = {
            x:0,
            y:0
        };
        var end = {
            x: 0,
            y: 0
        };
        var index = 0;

        oPageWrap.addEventListener('touchstart',touch,false);
        oPageWrap.addEventListener('touchmove',touch,false);
        oPageWrap.addEventListener('touchend',touch,false);

        for( var i=0;i<length;i++ ){
            (function (i) {
                oNav[i].onclick =function () {
                    AddClass(i);
                }
            })(i)
        }

        function touch(event) {
            switch ( event.type ){
                case 'touchstart':
                    start.x = event.changedTouches[0].pageX;
                    start.y = event.changedTouches[0].pageY;
                    break;
                case 'touchmove':
                    end.x = event.changedTouches[0].pageX;
                    end.y = event.changedTouches[0].pageY;
                    break;
                case 'touchend':
                    if( (start.x - end.x) > ( Math.abs(end.y - start.y)*2 ) ){
                        index ++;
                        index = index > length-1 ? length-1 : index;
                        AddClass(index);
                    }
                    if( (end.x - start.x) > (Math.abs(end.y - start.y)*2) ){
                        index--;
                        index = index < 0 ? 0 : index;
                        AddClass(index);
                    }
                    break;
            }
        }
        function AddClass(k) {
            for( var i=0;i<oNav.length;i++ ){
                //oNav[i].className = 'navbar-item';
                oNav[i].setAttribute('class','navbar-item');
                oPage[i].setAttribute('class','page');
            }
            oNav[k].setAttribute('class','navbar-item navbar-item_on');
            oPage[k].setAttribute('class','page page_on');
        }
    </script> -->
</body>
</html>